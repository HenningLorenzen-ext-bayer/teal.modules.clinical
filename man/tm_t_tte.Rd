% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/tm_t_tte.R
\name{tm_t_tte}
\alias{tm_t_tte}
\title{Time To Event Table Teal Module}
\usage{
tm_t_tte(label, dataname, arm_var = "ARM", arm_var_choices = arm_var,
  arm_ref_comp = NULL, paramcd = "OS", paramcd_choices = paramcd,
  strata_var = NULL, strata_var_choices = strata_var, time_points,
  time_points_choices = time_points, time_unit = "months",
  event_desrc_var = NULL, pre_output = NULL, post_output = NULL)
}
\arguments{
\item{label}{menue item label of the module in the teal app}

\item{dataname}{analysis data used in teal module, needs to be available in
the list passed to the \code{data} argument of \code{\link[teal]{init}}.
Note that the data is expected to be in vertical form with the
\code{PARAMCD} variable filtering to one observation per patient.}

\item{arm_var}{single name of variable in analysis data that is used as
\code{\link[tern]{col_by}} argument.}

\item{arm_var_choices}{vector with variable names that can be used as
\code{arm_var}}

\item{arm_ref_comp}{optional, if specified it must be a named list with each
element corresponding to an arm variable in \code{ASL} and the element must
be another list with the elements named \code{ref} and \code{comp} that the
defined the default reference and comparison arms when the arm variable is
changed.}

\item{paramcd}{single selected endpoint filtered with \code{PARAMCD} variable}

\item{paramcd_choices}{vector with \code{paramcd} choices}

\item{strata_var}{vector with variable names that should be used for
stratification}

\item{strata_var_choices}{vector with possible choices for \code{strata_var}}

\item{time_points}{vector with timepoints as used in \code{\link[tern]{t_tte}}}

\item{time_points_choices}{vector with possible \code{time_points}s}

\item{time_unit}{string with unit of \code{dataname$AVAL}}

\item{event_desrc_var}{variable name with the event description information,
optional}

\item{pre_output}{optional, \code{shiny.tag} with text placed before the
output to put the output into context. For example the
\code{\link[shiny]{helpText}} elements are useful.}

\item{post_output}{optional, \code{shiny.tag} with text placed before the
output to put the output into context. For example the
\code{\link[shiny]{helpText}} elements are useful.}
}
\description{
Time to event table as defined in \code{\link[tern]{t_tte}} in the
\code{tern} package
}
\details{
This modules expects that the analysis data has the following variables

\tabular{ll}{
 \code{AVAL} \tab time to event\cr
 \code{CNSR} \tab boolean or 0,1 is element in \code{AVAL} censored\cr
 \code{PARAMCD} \tab variable used to filter for endpoint (e.g. OS), after filtering for \code{paramcd} one observation per patient is expected
}

The arm variables, stratification variables and taken from the \code{ASL}
data.
}
\examples{
 

\dontrun{
library(random.cdisc.data)

ASL <- radam('ASL', start_with = list(
  ITTFL = 'Y',
  SEX = c("M", "F"),
  MLIVER = paste("mliver", 1:3)
))
ATE <- radam('ATE', ADSL = ASL)

attr(ASL, "source") <- "radam('ASL', start_with = list(ITTFL = 'Y', SEX = c('M', 'F'), MLIVER = paste('mliver', 1:3)))"
attr(ATE, "source") <- "radam('ATE')"

x <- teal::init( 
  data = list(ASL = ASL, ATE = ATE),
  modules = root_modules(
    tm_t_tte(
       label = "Time To Event Table",
       dataname = 'ATE',
       arm_var = "ARM",
       arm_var_choices = c("ARM", "ARMCD"),
       paramcd = "OS",
       paramcd_choices = unique(ATE$PARAMCD),
       strata_var = "SEX",
       strata_var_choices = c("SEX", "MLIVER"),
       time_points = 6,
       time_points_choices = c(6, 8),
       time_unit = "months",
       event_desrc_var = "EVNTDESC"
   )
  )
)

shinyApp(x$ui, x$server) 


## Define default reference & comparison arms based on 
## ARM variable 
library(random.cdisc.data)

ASL <- radam('ASL', start_with = list(SEX = c("M", "F"), MLIVER = paste("mliver", 1:3)))
ATE <- radam('ATE', ADSL = ASL)

ASL$ARM <- paste(sample(paste("ARM", LETTERS[1:3]), nrow(ASL), TRUE))

arm_ref_comp = list(
   ARM = list(
      ref = "ARM A",
      comp = c("ARM B", "ARM C")
   ),
   ARMCD = list(
      ref = "ARM B",
      comp = "ARM A"
   )
)

x <- teal::init(
  data = list(ASL = ASL, ATE = ATE),
  modules = root_modules(
    tm_t_tte(
       label = "Time To Event Table",
       dataname = 'ATE',
       arm_var = "ARM",
       arm_var_choices = c("ARM", "ARMCD"),
       arm_ref_comp = arm_ref_comp,
       paramcd = "OS",
       paramcd_choices = unique(ATE$PARAMCD),
       strata_var = "SEX",
       strata_var_choices = c("SEX", "MLIVER"),
       time_points = 6,
       time_points_choices = c(6, 8),
       time_unit = "months",
       event_desrc_var = "EVNTDESC"
   )
  )
)

shinyApp(x$ui, x$server) 
  
} 
}
