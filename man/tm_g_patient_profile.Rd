% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/tm_g_patient_profile.R
\name{tm_g_patient_profile}
\alias{tm_g_patient_profile}
\title{Teal Module: Patient Profile Teal Module}
\usage{
tm_g_patient_profile(
  label,
  parentname = "ADSL",
  patient_col = "USUBJID",
  bi_vars = NULL,
  mh_term = NULL,
  mh_bodsys = NULL,
  atirel = NULL,
  medname_decoding = NULL,
  v_paramcd = NULL,
  v_param = NULL,
  v_xaxis = NULL,
  v_aval = NULL,
  lb_paramcd = NULL,
  lb_param = NULL,
  lb_timepoints = NULL,
  lb_anrind = NULL,
  lb_aval = NULL,
  lb_avalu = NULL,
  ae_term = NULL,
  ae_tox_grade = NULL,
  ae_causality = NULL,
  ae_outcome = NULL,
  ae_action = NULL,
  ae_time = NULL,
  pt_aetime_start = NULL,
  pt_aetime_end = NULL,
  ae_decod = NULL,
  cmindc = NULL,
  t_cmdose = NULL,
  cmtrt = NULL,
  t_cmdosu = NULL,
  t_cmroute = NULL,
  t_cmdosfrq = NULL,
  cmstdy = NULL,
  t_cmendy = NULL,
  pt_dstime_start = NULL,
  pt_dstime_end = NULL,
  font_size = c(12L, 12L, 25L),
  plot_height = c(700L, 200L, 2000L),
  plot_width = c(900L, 200L, 2000L),
  pre_output = NULL,
  post_output = NULL
)
}
\arguments{
\item{label}{(\code{character})\cr
menu item label of the module in the teal app}

\item{parentname}{(\code{character})\cr
parent analysis data used in teal module, usually this refers to \code{ADSL}.}

\item{patient_col}{(\code{character}) value patient ID column to be used.}

\item{bi_vars}{(\verb{choices selected} or \code{data_extract_input})\cr ADSL columns to be shown in Basic Info tab.}

\item{mh_term}{(\verb{choices selected} or \code{data_extract_input})\cr \code{MHTERM} column of the ADMH dataset.}

\item{mh_bodsys}{(\verb{choices selected} or \code{data_extract_input})\cr \code{MHBODSYS} column of the ADMH dataset.}

\item{atirel}{(\verb{choices selected} or \code{data_extract_input})\cr \code{ATIREL} column of the ADCM dataset.}

\item{medname_decoding}{(\verb{choices selected} or \code{data_extract_input})\cr \code{CMDECOD} column of the ADCM dataset.}

\item{v_paramcd}{(\verb{choices selected} or \code{data_extract_input})\cr \code{PARAMCD} column of the ADVS dataset.}

\item{v_param}{(\verb{choices selected} or \code{data_extract_input})\cr \code{PARAM} column of the ADVS dataset.}

\item{v_xaxis}{(\verb{choices selected} or \code{data_extract_input})\cr Time variable to be represented in
the vitals plot x-axis.}

\item{v_aval}{(\verb{choices selected} or \code{data_extract_input})\cr \code{AVAL} column of the ADVS dataset.}

\item{lb_paramcd}{(\verb{choices selected} or \code{data_extract_input})\cr \code{PARAMCD} column of the ADLB dataset.}

\item{lb_param}{(\verb{choices selected} or \code{data_extract_input})\cr \code{PARAM} column of the ADLB dataset.}

\item{lb_timepoints}{(\verb{choices selected} or \code{data_extract_input})\cr Time variable to be represented in
the laboratory table.}

\item{lb_anrind}{(\verb{choices selected} or \code{data_extract_input})\cr \code{ANRIND} column of the ADLB dataset
with 3 possible levels "HIGH", "LOW" and "NORMAL".}

\item{lb_aval}{(\verb{choices selected} or \code{data_extract_input})\cr \code{AVAL} column of the ADLB dataset.}

\item{lb_avalu}{(\verb{choices selected} or \code{data_extract_input})\cr \code{AVALU} column of the ADLB dataset.}

\item{ae_term}{(\verb{choices selected} or \code{data_extract_input})\cr \code{AETERM} column of the ADAE dataset.}

\item{ae_tox_grade}{(\verb{choices selected} or \code{data_extract_input})\cr \code{AETOXGR} column of the ADAE dataset.}

\item{ae_causality}{(\verb{choices selected} or \code{data_extract_input})\cr \code{AEREL} column of the ADAE dataset.}

\item{ae_outcome}{(\verb{choices selected} or \code{data_extract_input})\cr \code{AEOUT} column of the ADAE dataset.}

\item{ae_action}{(\verb{choices selected} or \code{data_extract_input})\cr \code{AEACN} column of the ADAE dataset.}

\item{ae_time}{(\verb{choices selected} or \code{data_extract_input})\cr \code{ASTDY} column of the ADAE dataset.}

\item{pt_aetime_start}{(\verb{choices selected} or \code{data_extract_input})\cr \code{ASTDTM} column of the AE
start of the ADAE dataset.}

\item{pt_aetime_end}{(\verb{choices selected} or \code{data_extract_input})\cr \code{AENDTM} column of the AE
end of the ADAE dataset.}

\item{ae_decod}{(\verb{choices selected} or \code{data_extract_input})\cr \code{AEDECOD} column of the ADAE dataset.}

\item{cmindc}{(\verb{choices selected} or \code{data_extract_input})\cr \code{CMINDC} column of the ADCM dataset.}

\item{t_cmdose}{(\verb{choices selected} or \code{data_extract_input})\cr \code{CMDOSE} column of the ADCM dataset.}

\item{cmtrt}{(\verb{choices selected} or \code{data_extract_input})\cr \code{CMTRT} column of the ADCM dataset.}

\item{t_cmdosu}{(\verb{choices selected} or \code{data_extract_input})\cr \code{CMDOSU} column of the ADCM dataset.}

\item{t_cmroute}{(\verb{choices selected} or \code{data_extract_input})\cr \code{CMROUTE} column of the ADCM dataset.}

\item{t_cmdosfrq}{(\verb{choices selected} or \code{data_extract_input})\cr \code{CMDOSFRQ} column of the ADCM dataset.}

\item{cmstdy}{(\verb{choices selected} or \code{data_extract_input})\cr \code{CMSTDY} column of the ADCM dataset.}

\item{t_cmendy}{(\verb{choices selected} or \code{data_extract_input})\cr \code{CMENDY} column of the ADCM dataset.}

\item{pt_dstime_start}{(\verb{choices selected} or \code{data_extract_input})\cr \code{CMASTDTM} column of treatment
start of the ADCM dataset.}

\item{pt_dstime_end}{(\verb{choices selected} or \code{data_extract_input})\cr \code{CMAENDTM} column of treatment
end of the ADCM dataset.}

\item{font_size}{(\code{numeric})\cr numeric vector of length 3 for current, min and max font size values.}

\item{plot_height}{optional, (\code{numeric})\cr
a vector of length three with \code{c(value, min, max)}. Specifies the height of
the main plot and renders a slider on the plot to interactively adjust the plot
height.}

\item{plot_width}{optional, (\code{numeric})\cr
a vector of length three with \code{c(value, min, max)}. Specifies the width of
the main plot and renders a slider on the plot to interactively adjust the plot
width.}

\item{pre_output}{optional, (\code{shiny.tag})\cr
with text placed before the output to put the output into context.
For example a title.}

\item{post_output}{optional, (\code{shiny.tag})\cr
with text placed after the output to put the output into context. For example
the \code{\link[shiny:helpText]{shiny::helpText()}} elements are useful.}
}
\description{
This teal module produces a patient profile report using ADaM datasets.
}
\note{
\itemize{
\item Please note that \code{tm_g_patient_profile} is the very first version and will be split into multiple separate modules
in future releases.
\item The vitals plot supports horizontal lines for 6 PARAMCD levels (\verb{SYSBP, DIABP, TEMP, RESP, OXYSAT and PULSE})\cr when these levels are present in the analyzed dataset and the spelling matches.
}
}
\examples{

library(random.cdisc.data)
library(dplyr)
ADSL <- radsl(cached = TRUE)
ADMH <- radmh(cached = TRUE)
ADAE <- radae(cached = TRUE)
ADCM <- radcm(cached = TRUE)
ADVS <- radvs(cached = TRUE)
ADLB <- radlb(cached = TRUE)

#' Modify ADCM
ADCM$CMINDC <- paste0("Indication_", as.numeric(ADCM$CMDECOD))
ADCM$CMDOSE <- 1
ADCM$CMTRT <- ADCM$CMCAT
ADCM$CMDOSU <- "U"
ADCM$CMROUTE <- "CMROUTE"
ADCM$CMDOSFRQ <- "CMDOSFRQ"
ADCM$CMSTDY <- 1
ADCM[ADCM$CMCAT == "medcl B", ]$CMSTDY <- 20
ADCM[ADCM$CMCAT == "medcl C", ]$CMSTDY <- 150
ADCM$CMENDY <- 500
ADCM[ADCM$CMCAT == "medcl B", ]$CMENDY <- 700
ADCM[ADCM$CMCAT == "medcl C", ]$CMENDY <- 1000
ADCM$CMASTDTM <- ADCM$ASTDTM
ADCM$CMAENDTM <- ADCM$AENDTM
rtables::var_labels(
  ADCM[c("CMINDC", "CMTRT", "CMSTDY", "CMENDY")]) <- c(
    "Indication",
    "Reported Name of Drug, Med, or Therapy",
    "Study Day of Start of Medication",
    "Study Day of End of Medication")
adcm_keys <- c("STUDYID", "USUBJID", "ASTDTM", "CMSEQ", "ATC1", "ATC2", "ATC3", "ATC4")

app <- init(
  data = cdisc_data(
    cdisc_dataset("ADSL", ADSL, code = "ADSL <- radsl(cached = TRUE)"),
    cdisc_dataset("ADAE", ADAE, code = "ADAE <- radae(cached = TRUE)"),
    cdisc_dataset("ADMH", ADMH, code = "ADMH <- radmh(cached = TRUE)"),
    cdisc_dataset("ADCM", ADCM, code = 'ADCM <- radcm(cached = TRUE)
      ADCM$CMINDC <- paste0("Indication_", as.numeric(ADCM$CMDECOD))
      ADCM$CMDOSE <- 1
      ADCM$CMTRT <- ADCM$CMCAT
      ADCM$CMDOSU <- "U"
      ADCM$CMROUTE <- "CMROUTE"
      ADCM$CMDOSFRQ <- "CMDOSFRQ"
      ADCM$CMSTDY <- 1
      ADCM[ADCM$CMCAT == "medcl B", ]$CMSTDY <- 20
      ADCM[ADCM$CMCAT == "medcl C", ]$CMSTDY <- 150
      ADCM$CMENDY <- 500
      ADCM[ADCM$CMCAT == "medcl B", ]$CMENDY <- 700
      ADCM[ADCM$CMCAT == "medcl C", ]$CMENDY <- 1000
      ADCM$CMASTDTM <- ADCM$ASTDTM
      ADCM$CMAENDTM <- ADCM$AENDTM
      rtables::var_labels(
        ADCM[c("CMINDC", "CMTRT", "CMSTDY", "CMENDY")]) <- c(
          "Indication",
          "Reported Name of Drug, Med, or Therapy",
          "Study Day of Start of Medication",
          "Study Day of End of Medication")',
      keys = adcm_keys),
    cdisc_dataset("ADVS", ADVS, code = "ADVS <- radvs(cached = TRUE)"),
    cdisc_dataset("ADLB", ADLB, code = "ADLB <- radlb(cached = TRUE)"),
    check = TRUE
  ),
  modules = root_modules(
    tm_g_patient_profile(
      label = "Patient Profile",
      parentname = "ADSL",
      patient_col = "USUBJID",
      plot_height = c(600L, 200L, 2000L),
      bi_vars = data_extract_spec(
        dataname = "ADSL",
        select = select_spec(
          choices = variable_choices(ADSL),
          selected = c("ARM", "AGE", "SEX", "COUNTRY", "RACE", "EOSSTT"),
          multiple = TRUE,
          fixed = FALSE
        )
      ),
      mh_term = data_extract_spec(
        dataname = "ADMH",
        select = select_spec(
          choices = variable_choices(ADMH, c("MHTERM")),
          selected = c("MHTERM"),
          multiple = FALSE,
          fixed = TRUE
        )
      ),
      mh_bodsys = data_extract_spec(
        dataname = "ADMH",
        select = select_spec(
          choices = variable_choices(ADMH, "MHBODSYS"),
          selected = c("MHBODSYS"),
          multiple = FALSE,
          fixed = TRUE
        )
      ),
      v_paramcd = data_extract_spec(
        dataname = "ADVS",
        select = select_spec(
          choices = variable_choices(ADVS, "PARAMCD"),
          selected = c("PARAMCD"),
          multiple = FALSE,
          fixed = TRUE
        )
      ),
      v_param = data_extract_spec(
        dataname = "ADVS",
        select = select_spec(
          choices = variable_choices(ADVS, "PARAM"),
          selected = c("PARAM"),
          multiple = FALSE,
          fixed = TRUE
        )
      ),
      lb_paramcd = data_extract_spec(
        dataname = "ADLB",
        select = select_spec(
          choices = variable_choices(ADLB, "PARAMCD"),
          selected = c("PARAMCD"),
          multiple = FALSE,
          fixed = TRUE
        )
      ),
      lb_param = data_extract_spec(
        dataname = "ADLB",
        select = select_spec(
          choices = variable_choices(ADLB, "PARAM"),
          selected = c("PARAM"),
          multiple = FALSE,
          fixed = TRUE
        )
      ),
      v_xaxis = data_extract_spec(
        dataname = "ADVS",
        select = select_spec(
          choices = variable_choices(ADVS, "ADY"),
          selected = c("ADY"),
          multiple = FALSE,
          fixed = TRUE
        )
      ),
      lb_timepoints = data_extract_spec(
        dataname = "ADLB",
        select = select_spec(
          choices = variable_choices(ADLB, "ADY"),
          selected = c("ADY"),
          multiple = FALSE,
          fixed = TRUE
        )
      ),
      lb_anrind = data_extract_spec(
        dataname = "ADLB",
        select = select_spec(
          choices = variable_choices(ADLB, "ANRIND"),
          selected = c("ANRIND"),
          multiple = FALSE,
          fixed = TRUE
        )
      ),
      v_aval = data_extract_spec(
        dataname = "ADVS",
        select = select_spec(
          choices = variable_choices(ADVS, "AVAL"),
          selected = c("AVAL"),
          multiple = FALSE,
          fixed = TRUE
        )
      ),
      lb_aval = data_extract_spec(
        dataname = "ADLB",
        select = select_spec(
          choices = variable_choices(ADLB, "AVAL"),
          selected = c("AVAL"),
          multiple = FALSE,
          fixed = TRUE
        )
      ),
      lb_avalu = data_extract_spec(
        dataname = "ADLB",
        select = select_spec(
          choices = variable_choices(ADLB, "AVALU"),
          selected = c("AVALU"),
          multiple = FALSE,
          fixed = TRUE
        )
      ),
      atirel = data_extract_spec(
        dataname = "ADCM",
        select = select_spec(
          choices = variable_choices(ADCM, "ATIREL"),
          selected = c("ATIREL"),
          multiple = FALSE,
          fixed = TRUE
        )
      ),
      medname_decoding = data_extract_spec(
        dataname = "ADCM",
        select = select_spec(
          choices = variable_choices(ADCM, "CMDECOD"),
          selected = c("CMDECOD"),
          multiple = FALSE,
          fixed = TRUE
        )
      ),
      cmindc = data_extract_spec(
        dataname = "ADCM",
        select = select_spec(
          choices = variable_choices(ADCM, "CMINDC"),
          selected = c("CMINDC"),
          multiple = FALSE,
          fixed = TRUE
        )
      ),
      t_cmdose = data_extract_spec(
        dataname = "ADCM",
        select = select_spec(
          choices = variable_choices(ADCM, "CMDOSE"),
          selected = c("CMDOSE"),
          multiple = FALSE,
          fixed = TRUE
        )
      ),
      cmtrt = data_extract_spec(
        dataname = "ADCM",
        select = select_spec(
          choices = variable_choices(ADCM, "CMTRT"),
          selected = c("CMTRT"),
          multiple = FALSE,
          fixed = TRUE
        )
      ),
      t_cmdosu = data_extract_spec(
        dataname = "ADCM",
        select = select_spec(
          choices = variable_choices(ADCM, "CMDOSU"),
          selected = c("CMDOSU"),
          multiple = FALSE,
          fixed = TRUE
        )
      ),
      t_cmroute = data_extract_spec(
        dataname = "ADCM",
        select = select_spec(
          choices = variable_choices(ADCM, "CMROUTE"),
          selected = c("CMROUTE"),
          multiple = FALSE,
          fixed = TRUE
        )
      ),
      t_cmdosfrq = data_extract_spec(
        dataname = "ADCM",
        select = select_spec(
          choices = variable_choices(ADCM, "CMDOSFRQ"),
          selected = c("CMDOSFRQ"),
          multiple = FALSE,
          fixed = TRUE
        )
      ),
      cmstdy = data_extract_spec(
        dataname = "ADCM",
        select = select_spec(
          choices = variable_choices(ADCM, "CMSTDY"),
          selected = c("CMSTDY"),
          multiple = FALSE,
          fixed = TRUE
        )
      ),
      t_cmendy = data_extract_spec(
        dataname = "ADCM",
        select = select_spec(
          choices = variable_choices(ADCM, "CMENDY"),
          selected = c("CMENDY"),
          multiple = FALSE,
          fixed = TRUE
        )
      ),
      ae_term = data_extract_spec(
        dataname = "ADAE",
        select = select_spec(
          choices = variable_choices(ADAE, "AETERM"),
          selected = c("AETERM"),
          multiple = FALSE,
          fixed = TRUE
        )
      ),
      ae_tox_grade = data_extract_spec(
        dataname = "ADAE",
        select = select_spec(
          choices = variable_choices(ADAE, "AETOXGR"),
          selected = c("AETOXGR"),
          multiple = FALSE,
          fixed = TRUE
        )
      ),
      ae_causality = data_extract_spec(
        dataname = "ADAE",
        select = select_spec(
          choices = variable_choices(ADAE, "AEREL"),
          selected = c("AEREL"),
          multiple = FALSE,
          fixed = TRUE
        )
      ),
      ae_outcome = data_extract_spec(
        dataname = "ADAE",
        select = select_spec(
          choices = variable_choices(ADAE, "AEOUT"),
          selected = c("AEOUT"),
          multiple = FALSE,
          fixed = TRUE
        )
      ),
      ae_action = data_extract_spec(
        dataname = "ADAE",
        select = select_spec(
          choices = variable_choices(ADAE, "AEACN"),
          selected = c("AEACN"),
          multiple = FALSE,
          fixed = TRUE
        )
      ),
      ae_time = data_extract_spec(
        dataname = "ADAE",
        select = select_spec(
          choices = variable_choices(ADAE, "ASTDY"),
          selected = c("ASTDY"),
          multiple = FALSE,
          fixed = TRUE
        )
      ),
      ae_decod = NULL,
      pt_aetime_start = data_extract_spec(
        dataname = "ADAE",
        select = select_spec(
          choices = variable_choices(ADAE, "ASTDTM"),
          selected = c("ASTDTM"),
          multiple = FALSE,
          fixed = TRUE
        )
      ),
      pt_aetime_end = data_extract_spec(
        dataname = "ADAE",
        select = select_spec(
          choices = variable_choices(ADAE, "AENDTM"),
          selected = c("AENDTM"),
          multiple = FALSE,
          fixed = TRUE
        )
      ),
      pt_dstime_start = data_extract_spec(
        dataname = "ADCM",
        select = select_spec(
          choices = variable_choices(ADCM, "CMASTDTM"),
          selected = c("CMASTDTM"),
          multiple = FALSE,
          fixed = TRUE
        )
      ),
      pt_dstime_end = data_extract_spec(
        dataname = "ADCM",
        select = select_spec(
          choices = variable_choices(ADCM, "CMAENDTM"),
          selected = c("CMAENDTM"),
          multiple = FALSE,
          fixed = TRUE
        )
      )
    )
  )
)
\dontrun{
shinyApp(app$ui, app$server)
}

}
